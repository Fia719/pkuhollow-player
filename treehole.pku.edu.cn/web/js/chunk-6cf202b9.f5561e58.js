(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-6cf202b9"],{4156:function(t,e,n){},"5f87":function(t,e,n){"use strict";n.d(e,"a",(function(){return r})),n.d(e,"c",(function(){return o})),n.d(e,"b",(function(){return u}));function r(){return $cookies.get("pku_token")}function o(t){return $cookies.set("pku_token",t,"2d")}function u(){return $cookies.remove("pku_token")}},"66f0":function(t,e,n){"use strict";n("4156")},"7c15":function(t,e,n){"use strict";n.d(e,"g",(function(){return d})),n.d(e,"c",(function(){return l})),n.d(e,"f",(function(){return f})),n.d(e,"d",(function(){return p})),n.d(e,"t",(function(){return m})),n.d(e,"s",(function(){return h})),n.d(e,"n",(function(){return g})),n.d(e,"m",(function(){return b})),n.d(e,"i",(function(){return _})),n.d(e,"l",(function(){return v})),n.d(e,"a",(function(){return k})),n.d(e,"q",(function(){return y})),n.d(e,"k",(function(){return w})),n.d(e,"e",(function(){return U})),n.d(e,"h",(function(){return j})),n.d(e,"o",(function(){return x})),n.d(e,"p",(function(){return $})),n.d(e,"j",(function(){return O})),n.d(e,"b",(function(){return I})),n.d(e,"r",(function(){return T}));var r=n("bc3a"),o=n.n(r),u=n("a18c"),i=n("5f87"),c=n("ec26"),s=o.a.create({baseURL:"/api",timeout:3e5,ContentType:"multipart/form-data"});s.interceptors.request.use((function(t){var e=Object(i.a)();e&&(t.headers.Authorization="Bearer "+e);var n=localStorage.getItem("pku-uuid");return n||(n=Object(c.a)(),localStorage.setItem("pku-uuid","Web_PKUHOLE_2.0.0_WEB_UUID_"+n)),t.headers.Uuid=n,t}),(function(t){return Promise.reject(t)})),s.interceptors.response.use((function(t){return 200===t.status?t.data&&t.data.code&&40002===t.data.code?u.a.push({path:"/verification"}):t.data&&t.data.code&&40008===t.data.code?u.a.push({path:"/verification_user"}):(t.data&&t.data.success,Promise.resolve(t.data)):Promise.reject(t)}),(function(t){if(t.response&&t.response.status){switch(t.response.status){case 400:break;case 401:u.a.push({path:"/login"})}return Promise.reject(t.response)}}));var a=s;function d(t){return a({url:"/getScore",params:t})}function l(t){return a({url:"/course/score",params:t})}function f(t){return a({url:"/pku_hole",params:t})}function p(t){return a({url:"/follow_v2",params:t})}function m(t){return a({method:"post",url:"/test_login",data:t})}function h(t){return a({method:"post",url:"/login",data:t})}function g(t){return a({method:"post",url:"/pku_store",data:t})}function b(t,e){return a({method:"get",url:"/pku_comment_v3/".concat(e),params:t})}function _(t){return a({method:"post",url:"/pku_comment_v3",data:t})}function v(t){return a({method:"get",url:"/pku/".concat(t)})}function k(t){return a({method:"post",url:"/pku_attention/".concat(t)})}function y(t,e){return a({method:"post",url:"/pku_report/".concat(e),data:t})}function w(t){return a({url:"/pku/manager_spec",params:t})}function U(t){return a({url:"/pku_image/".concat(t),responseType:"blob"})}function j(){return a({url:"/pku/tags"})}function x(){return a({url:"/jwt_send_msg",method:"post"})}function $(t){return a({url:"/jwt_msg_verify",method:"post",data:t})}function O(){return a({url:"/logout",method:"post"})}function I(t){return a({url:"/check_otp",method:"post",data:t})}function T(){return a({url:"/title-otp",method:"get"})}},"9b66":function(t,e,n){"use strict";n.r(e);var r=n("7c15"),o=n("5f87"),u={data:function(){return{dialogVisible:!0,valid_code:"",disabled:!1,btnTxt:"获取短信验证码"}},methods:{getCode:function(){var t=this;Object(r.o)().then((function(e){!0===e.success?(t.time=60,t.disabled=!0,t.timer(),t.$message.success("发送成功")):t.$message.error(e.message)})).catch((function(e){t.$message.error(e.statusText)}))},timer:function(){this.time>0?(this.time--,this.btnTxt=this.time+"s后重新获取验证码",setTimeout(this.timer,1e3)):(this.time=0,this.btnTxt="获取手机验证码",this.disabled=!1)},submit:function(){var t=this;Object(r.p)({valid_code:this.valid_code}).then((function(e){!0===e.success?(t.$message.success("验证成功"),t.$router.push("/")):t.$message.error(e.message)})).catch((function(e){t.$message.error(e)}))},loginOut:function(){var t=this;Object(r.j)().then((function(e){Object(o.b)(),localStorage.removeItem("pku-uuid"),t.$store.commit("CHANGE_ALERT",!1),t.$router.push({path:"/login"})}))}}},i=(n("66f0"),n("2877")),c=Object(i.a)(u,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("el-dialog",{attrs:{title:"短信认证",center:"",visible:t.dialogVisible,top:"30vh","close-on-press-escape":!1,"close-on-click-modal":!1,"show-close":!1},on:{"update:visible":function(e){t.dialogVisible=e}}},[n("el-input",{staticStyle:{width:"100%"},attrs:{clearable:""},model:{value:t.valid_code,callback:function(e){t.valid_code=e},expression:"valid_code"}},[n("div",{staticStyle:{color:"#891B11",float:"right",height:"39px","line-height":"39px",cursor:"pointer",border:"1px solid  #891B11",padding:"0 10px"},attrs:{slot:"suffix",disabled:t.disabled},on:{click:t.getCode},slot:"suffix"},[t._v("\n        "+t._s(t.btnTxt)+"\n      ")])]),n("div",{staticClass:"desc"},[t._v("请输入您绑定手机接收到的验证码")]),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("div",{on:{click:t.loginOut}},[t._v("返回登录")]),n("div",{attrs:{type:"primary"},on:{click:t.submit}},[t._v("确 定")])])],1)],1)}),[],!1,null,"12459914",null);e.default=c.exports},ec26:function(t,e,n){"use strict";var r={randomUUID:"undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};let o;const u=new Uint8Array(16);function i(){if(!o&&(o="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!o))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return o(u)}const c=[];for(let t=0;t<256;++t)c.push((t+256).toString(16).slice(1));function s(t,e=0){return(c[t[e+0]]+c[t[e+1]]+c[t[e+2]]+c[t[e+3]]+"-"+c[t[e+4]]+c[t[e+5]]+"-"+c[t[e+6]]+c[t[e+7]]+"-"+c[t[e+8]]+c[t[e+9]]+"-"+c[t[e+10]]+c[t[e+11]]+c[t[e+12]]+c[t[e+13]]+c[t[e+14]]+c[t[e+15]]).toLowerCase()}e.a=function(t,e,n){if(r.randomUUID&&!e&&!t)return r.randomUUID();const o=(t=t||{}).random||(t.rng||i)();if(o[6]=15&o[6]|64,o[8]=63&o[8]|128,e){n=n||0;for(let t=0;t<16;++t)e[n+t]=o[t];return e}return s(o)}}}]);